# Project 1
## Property Booking Application - Technology Project
The Property Booking technology project entails developing a comprehensive full-stack application utilizing Spring Boot and React, aimed at facilitating property bookings akin to platforms such as AirBNB. The Minimum Viable Product (MVP) includes essential user stories ranging from account creation and authentication to property browsing and booking functionalities. User roles, including owners and renters, each have distinct capabilities such as property management and booking history tracking. Additionally, the entity-relationship model outlines core entities like User, Property, and Booking, establishing a foundation for the application's data structure and functionality.

Integrated Technology Frameworks include Java 17+, Spring Boot 3+, PostgreSQL database, UI built with React, JavaScript, and Chakra

## Implemented User Stories
- Create an account as a renter or an owner
- Log into the account
- As an owner, add/list a property to rent
- As an owner, view all the properties listed by themselves
- As an owner, edit the listed property
- As an owner, delete a listed property
- As a renter, view all properties for booking
- As a renter, book a property for rent
- As a renter, cancel a booking
- As a renter, view booking history

## Setting up the Database
You can configure your database and modify the application.properties files as you please, but if you do not want to change the application.properties file your database should have the following names: settings:
```
Database name: postgres
Schema name: public
Username: postgres
Password: p4ssword
```

For reference, this is in the application.properties file
```properties
spring.application.name=Project1
spring.datasource.url=jdbc:postgresql://localhost:5432/postgres
# Set the default schema for Hibernate
spring.jpa.properties.hibernate.default_schema=public
spring.datasource.username=postgres
spring.datasource.password=p4ssword
spring.jpa.hibernate.ddl-auto=validate
hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
```
### Create Tables
Run the following queries to create the tables:
```sql
-- Drop existing tables to avoid conflicts during creation
DROP TABLE IF EXISTS bookings CASCADE;
DROP TABLE IF EXISTS properties CASCADE;
DROP TABLE IF EXISTS users CASCADE;

-- Create Users table
CREATE TABLE users (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    first_name VARCHAR(50),
    last_name VARCHAR(50),
    role VARCHAR(50) CHECK (role IN ('owner', 'renter')) NOT NULL
);

-- Create Properties table
CREATE TABLE properties (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    user_id BIGINT NOT NULL,
    address VARCHAR(255) NOT NULL,
    city VARCHAR(100) NOT NULL,
    state VARCHAR(20) NOT NULL,
    zipcode VARCHAR(20) NOT NULL,
    description TEXT,
    price DOUBLE PRECISION NOT NULL,
    bedrooms BIGINT NOT NULL,
    bathrooms BIGINT NOT NULL,
    num_of_guests BIGINT NOT NULL,
    pets BOOLEAN,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- Create Bookings table
CREATE TABLE bookings (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    property_id BIGINT NOT NULL,
    user_id BIGINT NOT NULL,
    start_date DATE NOT NULL,
    end_date DATE NOT NULL,
    status VARCHAR(20) CHECK (status IN ('pending', 'confirmed', 'canceled')) NOT NULL,
    FOREIGN KEY (property_id) REFERENCES properties(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
```
This portion is not necessary, but you can run these queries for some entries in the database for testing.
``` sql
-- Insert into users
INSERT INTO users (username, email, password_hash, first_name, last_name, role) VALUES
('owner1', 'owner1@example.com', '$2a$10$T9Febd2X.zPT5iAf4T2dVOQaX0p9hz6GPe.y6m2h9FoEgumIo0VUi', 'John', 'Doe', 'owner'), -- password1
('owner2', 'owner2@example.com', '$2a$10$oSZepzH6Hvij09zI/oCveumajcp9uusaW8OssBdy010Yejmuxmk.e', 'Jane', 'Smith', 'owner'), -- password2
('renter1', 'renter1@example.com', '$2a$10$FOm7qtCry1kiVaf4ZXwcDurolghqvOCXnJ0KezqFrrq26HtIQQ3Be', 'Alice', 'Johnson', 'renter'), -- password3
('renter2', 'renter2@example.com', '$2a$10$aL6PeUb9VyUPht1xkI9hz.TjEPU1cTAUokU9ysAs.x9EQC0Ld6yHi', 'Bob', 'Brown', 'renter'), -- password4
('renter3', 'renter3@example.com', '$2a$10$/1KG/5jqR5epsxoxqTUE1e50jVXU7fPxMLLlQv3puXuot.UFEklOu', 'Charlie', 'Davis', 'renter'); -- password5

-- Insert into properties
INSERT INTO properties (user_id, address, city, state, zipcode, description, price, bedrooms, bathrooms, num_of_guests, pets) VALUES
(1, '123 Maple St', 'Austin', 'TX', '73301', 'Cozy 2-bedroom house with a garden.', 120.00, 2, 1, 4, true),
(1, '456 Oak St', 'Dallas', 'TX', '75201', 'Modern apartment with city views.', 150.00, 1, 1, 2, false),
(1, '789 Pine St', 'San Antonio', 'TX', '78201', 'Spacious 3-bedroom home with a pool.', 180.00, 3, 2, 6, true),
(1, '101 Birch St', 'Houston', 'TX', '77001', 'Charming house near downtown.', 130.00, 2, 1, 4, false),
(1, '202 Cedar St', 'El Paso', 'TX', '79901', 'Newly renovated loft.', 160.00, 1, 1, 3, true),
(1, '303 Elm St', 'San Diego', 'CA', '92101', 'Quiet suburban home.', 140.00, 3, 2, 5, false),
(1, '404 Maple St', 'Los Angeles', 'CA', '90001', 'Bright and airy apartment.', 170.00, 2, 1, 4, true),
(1, '505 Oak St', 'San Francisco', 'CA', '94101', 'Elegant 4-bedroom house.', 220.00, 4, 3, 8, false),
(1, '606 Pine St', 'Seattle', 'WA', '98101', 'Cozy cottage with a large backyard.', 150.00, 2, 1, 4, true),
(1, '707 Birch St', 'Portland', 'OR', '97201', 'Stylish city apartment.', 180.00, 1, 1, 2, false),
(1, '808 Cedar St', 'Denver', 'CO', '80201', 'Lovely home with modern amenities.', 190.00, 3, 2, 6, true),
(1, '909 Elm St', 'Phoenix', 'AZ', '85001', 'Spacious home with a garage.', 160.00, 3, 2, 5, false),
(1, '1010 Maple St', 'Las Vegas', 'NV', '89101', 'Large home with a basement.', 200.00, 4, 3, 7, true),
(2, '111 Maple Ave', 'Chicago', 'IL', '60601', 'Charming 1-bedroom apartment.', 100.00, 1, 1, 2, true),
(2, '222 Oak Ave', 'New York', 'NY', '10001', 'Modern 2-bedroom condo.', 200.00, 2, 1, 4, false),
(2, '333 Pine Ave', 'Boston', 'MA', '02101', 'Spacious 2-bedroom home.', 140.00, 2, 2, 5, true),
(2, '444 Birch Ave', 'Philadelphia', 'PA', '19101', 'Cozy 1-bedroom house.', 110.00, 1, 1, 3, false),
(2, '555 Cedar Ave', 'Washington', 'DC', '20001', 'Newly renovated 3-bedroom house.', 160.00, 3, 2, 6, true),
(2, '666 Elm Ave', 'Baltimore', 'MD', '21201', 'Quiet suburban 2-bedroom apartment.', 130.00, 2, 1, 4, false),
(2, '777 Maple Ave', 'Miami', 'FL', '33101', 'Elegant 2-bedroom townhouse.', 180.00, 2, 2, 5, true);


-- Insert into bookings
INSERT INTO bookings (property_id, user_id, start_date, end_date, status) VALUES
(1, 3, '2024-09-01', '2024-09-07', 'confirmed'),
(1, 4, '2024-09-15', '2024-09-20', 'confirmed'),
(2, 3, '2024-10-01', '2024-10-05', 'confirmed'),
(2, 5, '2024-10-10', '2024-10-15', 'confirmed'),
(4, 3, '2024-12-01', '2024-12-10', 'pending'),
(5, 4, '2024-12-15', '2024-12-20', 'pending'),
(6, 5, '2024-12-22', '2024-12-28', 'pending'),
(7, 3, '2024-12-29', '2025-01-04', 'pending'),
(8, 5, '2024-11-15', '2024-11-20', 'canceled'),
(9, 3, '2024-11-25', '2024-11-30', 'canceled'),
(10, 4, '2024-12-05', '2024-12-10', 'canceled'),
(11, 5, '2024-12-10', '2024-12-15', 'canceled');
```

## Backend Setup
In InteliJ open the /backend project, and go to the Project1Application file and run the project. This will have the backend server running.

## Frontend Setup
In terminal or VSCode, cd to the /frontend folder directory, and run the following commands:
```
npm i
npm start
```

If you are having dependency issues with Typescript and react-script, run this command for a legacy version of Typescript:
```
npm install --legacy-peer-deps
```

When the frontend is running, open up http://localhost:3000/


